/* https://unpkg.com/vue-router-prefetch@1.4.0/dist/index.mjs */
var e="undefined"!=typeof window,t=e&&navigator.connection,n=e&&(!t||-1===(t.effectiveType||"").indexOf("2g")&&!t.saveData),r=e&&window.IntersectionObserver,o={};function i(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,r.withCredentials=!0),r.addEventListener("load",function(){200===r.status?t():n()}),r.send()})}var s=function(t){if(e){var n=document.createElement("link");return n.relList&&n.relList.supports&&n.relList.supports(t)}}("prefetch")?function(e){return new Promise(function(t,n){var r=document.createElement("link");r.rel="prefetch",r.href=e,r.addEventListener("load",t),r.addEventListener("error",n),document.head.appendChild(r)})}:i;function c(e,t){if(n&&!o[e])return(t?function(e){return self.fetch?fetch(e,{credentials:"include"}):i(e)}:s)(e).then(function(){o[e]=!0})}function u(t,o){void 0===o&&(o={});var i=o.componentName;void 0===i&&(i="RouterLink");var s=r&&new window.IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target._linkPrefetch()})}),u=e&&window.requestIdleCallback||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},f=t.component("RouterLink")||t.component("router-link");"development"!==process.env.NODE_ENV||f||console.error("[vue-router-prefetch] You need to call Vue.use(VueRouter) before this plugin!");var a={name:i,extends:f,props:{prefetch:{type:Boolean,default:!0},prefetchFiles:{type:Array}},mounted:function(){this.prefetch&&s&&n&&u(this.observe,{timeout:1e3})},beforeDestory:function(){this.unobserve()},methods:{observe:function(){s.observe(this.$el),this.$el._linkPrefetch=this.linkPrefetch,this._linkObserved=!0},unobserve:function(){this._linkObserved&&s.unobserve(this.$el)},getComponents:function(){return this.$router.getMatchedComponents(this.to).filter(function(e){return"function"==typeof e&&!e._prefetched})},linkPrefetch:function(){for(var e=0,t=this.getComponents();e<t.length;e+=1){var n=t[e];this.$emit("prefetch",this.to),n(),n._prefetched=!0}if(this.prefetchFiles)for(var r=0,o=this.prefetchFiles;r<o.length;r+=1){c(o[r])}this.unobserve()}}};t.component(a.name,a)}export default u;export{c as prefetch,u as install};
